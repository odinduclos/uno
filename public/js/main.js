function joinRoom(){$("#choose").hide("fast"),$("#uno").delay(500).show("fast")}function displayMessage(a,b){"undefined"==typeof b&&(b="green"),$("#error").append("<div style='color: "+b+";'>"+a+"</div>"),$("#error").animate({scrollTop:document.getElementById("error").scrollHeight},500)}var socket=io();socket.on("updateRooms",function(a){$("#choose #rooms").html("");var b=0;for(var c in a)$("#choose #rooms").append('<a href="javascript:void(0)" data-socket="'+c+'">'+a[c].room+" ("+a[c].players.length+" players)</a><br />"),b++;0==b?$("#join").hide():$("#choose #rooms a").on("click",function(){var a=$(this).data("socket");joinRoom(),displayMessage("Join room "+a+"."),socket.emit("joinRoom",{room:a,name:$("#name").val()})})}),$("#create").on("click",function(){joinRoom(),socket.emit("createRoom",{room:socket.id,name:$("#name").val()}),displayMessage("Create room "+($("#name").val()||socket.id)+"."),$("#launch").show()}),$("#launch").on("click",function(){socket.emit("launchGame"),displayMessage("Your turn to play."),$("#launch").hide()}),socket.on("updateGame",function(a){$("#board .content").html('<div class="card"><div class="card-center '+a.color+'">'+a.number+"</div></div>")}),socket.on("updateHand",function(a){$("#hand .content").html("");for(var b=0;b<a.length;b++){var c=a[b];$("#hand .content").append('<div class="card" data-index="'+b+'" data-color='+c.color+'><div class="card-center '+c.color+'">'+c.number+"</div></div>")}$("#hand .content").append('<div class="card draw"><div class="card-center grey">+</div></div>'),$("#hand .content .card").on("click",function(){"black"==$(this).data("color")?(console.log("card",$(this).data("index")),$("#color").data("index",$(this).data("index")),$("#color").show(),$(document).scrollTop(0)):$(this).hasClass("draw")?socket.emit("draw"):(socket.emit("play",{position:$(this).data("index"),color:$(this).data("color")}),$(document).scrollTop(0))}).css({cursor:"pointer"})}),$("#color div").on("click",function(a){socket.emit("play",{position:$(this).parent().data("index"),color:$(this).data("color")}),console.log("send play",{position:$(this).parent().data("index"),color:$(this).data("color")}),$("#color").hide()}),socket.on("displayError",function(a){403==a.error?displayMessage(a.message,"red"):418==a.error?displayMessage(a.message,"orange"):displayMessage(a.message,"black")}),socket.on("endGame",function(a){"undefined"!=typeof a?(displayMessage(a.name+" won this game!","red"),$("#uno").hide()):(displayMessage("A player left the game.","green"),$("#uno").hide()),$("#error").append("<div><button class='reload'>Reload</button></div>"),$("#error").animate({scrollTop:document.getElementById("error").scrollHeight},500),$(".reload").click(function(){location.reload()})});